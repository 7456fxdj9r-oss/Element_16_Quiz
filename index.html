<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Habits of Health Assessment</title>
    <style>
        :root {
            /* Branding Colors extracted from your screenshots */
            --bg-beige: #F4F2ED;       /* The warm background color */
            --brand-rust: #C05A43;     /* The top border/logo stone color */
            --brand-green: #7FAB56;    /* For positive results/progress */
            --text-dark: #404041;      /* Dark grey for readability */
            --card-white: #FFFFFF;
        }

        body {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background-color: var(--bg-beige);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: var(--text-dark);
        }

        /* Main Card Container */
        .app-container {
            background: var(--card-white);
            width: 100%;
            max-width: 600px;
            border-radius: 15px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            min-height: 600px;
            position: relative;
            border-top: 8px solid var(--brand-rust); /* The colored line at top */
        }

        /* Logo Section */
        .header {
            text-align: center;
            padding: 30px 20px 10px 20px;
            background: #fff;
            border-bottom: 1px solid #f0f0f0;
        }

        /* UPDATED: Logo size increased significantly */
        .app-logo {
            max-width: 280px; /* Increased from 140px */
            height: auto;
            display: block;
            margin: 0 auto;
        }

        /* Progress Bar */
        .progress-container {
            background: #E0E0E0;
            height: 6px;
            width: 100%;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--brand-green);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Content Area */
        .content-area {
            padding: 40px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        /* Typography */
        h1 {
            color: var(--text-dark);
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 1.8rem;
            text-align: center;
        }

        p {
            line-height: 1.6;
            color: #666;
            font-size: 1.1rem;
            text-align: center;
            margin-bottom: 20px;
        }

        /* Question Text - Forced High Contrast */
        .question-text {
            font-size: 1.6rem;
            color: #2C3E50; /* Dark Navy/Black */
            font-weight: 700;
            text-align: center;
            margin-bottom: 40px;
            line-height: 1.4;
            display: block; 
        }

        /* Buttons */
        .btn {
            padding: 18px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #fff;
            color: #555;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: 15px;
            text-align: left;
            padding-left: 30px;
            display: block;
            width: 100%;
            box-sizing: border-box; 
        }

        .btn:hover {
            border-color: var(--brand-rust);
            background-color: #FFF9F8; 
            color: var(--brand-rust);
        }

        .btn-primary {
            background-color: var(--brand-rust);
            color: white;
            text-align: center;
            border: none;
            margin-top: 10px;
        }

        .btn-primary:hover {
            background-color: #A04A36;
            color: white;
        }

        /* Utility classes for views */
        .view { display: none; }
        .view.active { display: flex; flex-direction: column; }

        /* Results Styling */
        .result-box {
            background: #F9F9F9;
            border-left: 5px solid var(--brand-rust);
            padding: 20px;
            margin-top: 20px;
            border-radius: 4px;
        }
        
        .result-box h3 { margin-top: 0; color: var(--brand-rust); }
        .result-box ul { padding-left: 20px; color: #555; }
        .result-box li { margin-bottom: 8px; }

        /* Spinner */
        .spinner {
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--brand-rust);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px auto;
        }

        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Mobile Adjustments */
        @media (max-width: 600px) {
            .app-logo { max-width: 200px; } /* Slightly smaller on mobile to fit screen */
            .question-text { font-size: 1.3rem; }
            .content-area { padding: 20px; }
        }
    </style>
</head>
<body>

<div class="app-container">
    <div class="header">
        <img src="hoh_logo.png" alt="Habits of Health" class="app-logo">
    </div>

    <div class="progress-container">
        <div id="progressBar" class="progress-bar"></div>
    </div>

    <div class="content-area">
        
        <div id="startView" class="view active">
            <h1>Food Addiction Susceptibility</h1>
            <p>This assessment helps you understand your relationship with sugar and refined flour, based on the <em>Habits of Health</em> system.</p>
            <p>Identifying your predisposition is the first step to rewiring your brain and taking control.</p>
            <button class="btn btn-primary" onclick="startQuiz()">Start Assessment</button>
        </div>

        <div id="questionView" class="view">
            <div id="questionText" class="question-text">Loading Question...</div>

            <button class="btn" onclick="handleAnswer('Rarely')">Rarely</button>
            <button class="btn" onclick="handleAnswer('Occasionally')">Occasionally</button>
            <button class="btn" onclick="handleAnswer('Daily')">Daily</button>
            
            <div style="text-align: center; margin-top: 30px; color: #999; font-size: 0.9rem;">
                Question <span id="currentQNum">1</span> of 10
            </div>
        </div>

        <div id="loadingView" class="view">
            <div style="text-align: center;">
                <div class="spinner"></div>
                <h2>Analyzing Profile...</h2>
                <p>Comparing your results against the Habits of Disease patterns...</p>
            </div>
        </div>

        <div id="resultsView" class="view">
            <div style="text-align: center;">
                <h2 id="resultTitle" style="font-size: 2rem; color: var(--brand-rust);"></h2>
                <div id="resultContent"></div>
                <button class="btn btn-primary" onclick="location.reload()">Retake Assessment</button>
            </div>
        </div>

    </div>
</div>

<script>
    // --- Configuration & Data ---
    [cite_start]// Source: Element-16.pdf [cite: 12-54]
    const questions = [
        "1. I find it difficult to control how much I eat.",
        "2. I crash in the afternoon and have trouble waking up in the morning.",
        "3. I have cravings for specific foods.",
        "4. I suffer from moodiness, headaches, or fogginess.",
        "5. When I only eat a moderate amount of food I am not satisfied.",
        "6. I feel guilty after eating.",
        "7. I spend a considerable amount of time thinking about food.",
        "8. I eat even if I am not hungry because I crave a food.",
        "9. I eat large amounts of food and feel powerless to stop.",
        "10. I crave carbohydrates like pasta, bread, white rice, or desserts."
    ];

    // State Variables
    let currentQuestionIndex = 0;
    let scores = {
        "Rarely": 0,
        "Occasionally": 0,
        "Daily": 0
    };

    // --- Core Functions ---

    // 1. Start the Quiz
    function startQuiz() {
        // Reset state
        currentQuestionIndex = 0;
        scores = { "Rarely": 0, "Occasionally": 0, "Daily": 0 };
        
        // Show Question View
        showView('questionView');
        renderQuestion();
    }

    // 2. Render the current question
    function renderQuestion() {
        const qTextEl = document.getElementById('questionText');
        const qNumEl = document.getElementById('currentQNum');
        const progressBar = document.getElementById('progressBar');

        // Update Text
        qTextEl.innerText = questions[currentQuestionIndex];
        qNumEl.innerText = currentQuestionIndex + 1;

        // Update Progress Bar
        const progressPercentage = ((currentQuestionIndex) / questions.length) * 100;
        progressBar.style.width = progressPercentage + '%';
    }

    // 3. Handle User Input
    function handleAnswer(answer) {
        // Record Score
        scores[answer]++;
        
        // Advance Index
        currentQuestionIndex++;

        // Check if finished
        if (currentQuestionIndex < questions.length) {
            renderQuestion();
        } else {
            // Finish
            document.getElementById('progressBar').style.width = '100%';
            finishQuiz();
        }
    }

    // 4. Transition to Loading then Results
    function finishQuiz() {
        showView('loadingView');
        
        // Simulate calculation delay (1.5 seconds)
        setTimeout(function() {
            calculateAndDisplayResults();
        }, 1500);
    }

    // 5. Logic to determine result
    function calculateAndDisplayResults() {
        showView('resultsView');

        [cite_start]// Scoring Logic (from Source: Element-16 [cite: 56-58])
        // >6 in a category determines the result.
        let resultCategory = "Mixed";
        if (scores["Daily"] > 6) {
            resultCategory = "High";
        } else if (scores["Occasionally"] > 6) {
            resultCategory = "Moderate";
        } else if (scores["Rarely"] > 6) {
            resultCategory = "Low";
        }

        // Generate Content based on Category
        const titleEl = document.getElementById('resultTitle');
        const contentEl = document.getElementById('resultContent');

        titleEl.innerText = resultCategory + " Susceptibility";

        let htmlContent = "";

        if (resultCategory === "High") {
            htmlContent = `
                <p><strong>What this means:</strong> According to the "rat lever" study, you are highly susceptible to cues. The cue itself has become the reward.</p>
                <div class="result-box">
                    <h3>üõ°Ô∏è Your Action Plan</h3>
                    <ul>
                        <li><strong>Strict Avoidance:</strong> Because this is likely genetically predetermined, you must avoid sugary and starchy processed foods entirely to prevent relapse.</li>
                        <li><strong>Green-Coded Foods:</strong> Stick to the green-coded chart. Avoiding sweet tastes helps calm dopamine receptors.</li>
                    </ul>
                </div>
            `;
        } else if (resultCategory === "Moderate") {
            htmlContent = `
                <p><strong>What this means:</strong> Like the moderate group in the study, you interact with the "lever" sometimes. In our obesigenic world, you are at risk.</p>
                <div class="result-box">
                    <h3>üõ°Ô∏è Your Action Plan</h3>
                    <ul>
                        <li><strong>Be Vigilant:</strong> You may not need total abstinence, but you must be very cautious with processed foods containing hidden sugars.</li>
                        <li><strong>Read Labels:</strong> Look for hidden sugar and flour.</li>
                    </ul>
                </div>
            `;
        } else {
            htmlContent = `
                <p><strong>What this means:</strong> You are like the group that only ate when hungry. You likely don't rely on food for emotional reward.</p>
                <div class="result-box">
                    <h3>üõ°Ô∏è Your Action Plan</h3>
                    <ul>
                        <li><strong>Maintain:</strong> Continue choosing whole, low-GI foods.</li>
                        <li><strong>Caution:</strong> Even with low risk, processed foods can disrupt your hunger hormones (Leptin/Insulin).</li>
                    </ul>
                </div>
            `;
        }

        // Common advice for all (Stop. Challenge. Choose.)
        htmlContent += `
            <div style="margin-top: 20px; text-align: left;">
                <p><strong>Next Steps:</strong></p>
                <p>Use the <em>Stop. Challenge. Choose.‚Ñ¢</em> method whenever you feel emotional tension or stress triggers.</p>
            </div>
        `;

        contentEl.innerHTML = htmlContent;
    }

    // Helper: Switch Screens
    function showView(viewId) {
        // Hide all views
        const views = document.querySelectorAll('.view');
        views.forEach(v => v.classList.remove('active'));
        
        // Show specific view
        document.getElementById(viewId).classList.add('active');
    }

</script>

</body>
</html>
